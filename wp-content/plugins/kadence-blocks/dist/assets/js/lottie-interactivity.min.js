!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).LottieInteractivity={})}(this,(function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function r(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}var o={player:"lottie-player"},s="[lottieInteractivity]:",l=function(){function e(){var a=this,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,A=l.actions,M=l.container,C=l.mode,T=l.player,H=i(l,["actions","container","mode","player"]);if(n(this,e),c.set(this,{writable:!0,value:function(){if(a.player){var e=function(){a.player.addEventListener("enterFrame",r(a,g)),a.container.addEventListener("mouseenter",r(a,L)),a.container.addEventListener("mouseleave",r(a,E))};a.stateHandler.set("loop",(function(){a.actions[a.interactionIdx].loop?a.player.loop=parseInt(a.actions[a.interactionIdx].loop)-1:a.player.loop=!0,a.player.autoplay=!0})),a.stateHandler.set("autoplay",(function(){a.player.loop=!1,a.player.autoplay=!0})),a.stateHandler.set("click",(function(){a.player.loop=!1,a.player.autoplay=!1,a.container.addEventListener("click",r(a,p))})),a.stateHandler.set("hover",(function(){a.player.loop=!1,a.player.autoplay=!1,a.container.addEventListener("mouseenter",r(a,p))})),a.transitionHandler.set("click",(function(){a.container.addEventListener("click",r(a,y))})),a.transitionHandler.set("hover",(function(){a.container.addEventListener("mouseenter",r(a,y))})),a.transitionHandler.set("hold",e),a.transitionHandler.set("pauseHold",e),a.transitionHandler.set("repeat",(function(){a.player.loop=!0,a.player.autoplay=!0;a.player.addEventListener("loopComplete",(function e(){r(a,h).call(a,{handler:e})}))})),a.transitionHandler.set("onComplete",(function(){"loop"===a.actions[a.interactionIdx].state?a.player.addEventListener("loopComplete",r(a,v)):a.player.addEventListener("complete",r(a,v))})),a.transitionHandler.set("seek",(function(){a.player.stop(),a.player.addEventListener("enterFrame",r(a,f)),a.container.addEventListener("mousemove",r(a,u)),a.container.addEventListener("mouseout",r(a,m))}))}}}),p.set(this,{writable:!0,value:function(){var e=a.actions[a.interactionIdx].forceFlag;e||!0!==a.player.isPaused?e&&r(a,I).call(a,!0):r(a,I).call(a,!0)}}),d.set(this,{writable:!0,value:function(){0===a.clickCounter?(a.player.play(),a.clickCounter++):(a.clickCounter++,a.player.setDirection(-1*a.player.playDirection),a.player.play())}}),y.set(this,{writable:!0,value:function(){var e=a.actions[a.interactionIdx].forceFlag;if("chain"===a.mode){if(a.actions[a.interactionIdx].count){var t=parseInt(a.actions[a.interactionIdx].count);if(a.clickCounter<t-1)return void(a.clickCounter+=1)}return a.clickCounter=0,a.container.removeEventListener("click",r(a,y)),a.container.removeEventListener("mouseenter",r(a,y)),void r(a,b).call(a)}e||!0!==a.player.isPaused?e&&a.player.goToAndPlay(0,!0):a.player.goToAndPlay(0,!0)}}),u.set(this,{writable:!0,value:function(e){r(a,P).call(a,e.clientX,e.clientY)}}),m.set(this,{writable:!0,value:function(){r(a,P).call(a,-1,-1)}}),v.set(this,{writable:!0,value:function(){"loop"===a.actions[a.interactionIdx].state?a.player.removeEventListener("loopComplete",r(a,v)):a.player.removeEventListener("complete",r(a,v)),r(a,b).call(a)}}),h.set(this,{writable:!0,value:function(e){var t=e.handler,n=1;a.actions[a.interactionIdx].repeat&&(n=a.actions[a.interactionIdx].repeat),a.playCounter>=n-1?(a.playCounter=0,a.player.removeEventListener("loopComplete",t),a.player.loop=!1,a.player.autoplay=!1,r(a,b).call(a)):a.playCounter+=1}}),f.set(this,{writable:!0,value:function(){var e=a.actions[a.interactionIdx].frames;e&&a.player.currentFrame>=parseInt(e[1])-1&&(a.player.removeEventListener("enterFrame",r(a,f)),a.container.removeEventListener("mousemove",r(a,u)),a.container.removeEventListener("mouseout",r(a,m)),setTimeout(r(a,b),0))}}),g.set(this,{writable:!0,value:function(){var e=a.actions[a.interactionIdx].frames;(e&&a.player.currentFrame>=e[1]||a.player.currentFrame>=a.player.totalFrames-1)&&(a.player.removeEventListener("enterFrame",r(a,g)),a.container.removeEventListener("mouseenter",r(a,L)),a.container.removeEventListener("mouseleave",r(a,E)),a.player.pause(),r(a,b).call(a))}}),L.set(this,{writable:!0,value:function(){-1!==a.player.playDirection&&0!==a.player.currentFrame&&"pauseHold"!==a.actions[a.interactionIdx].transition&&"pauseHold"!==a.actions[0].type||(a.player.setDirection(1),a.player.play())}}),E.set(this,{writable:!0,value:function(){"hold"===a.actions[a.interactionIdx].transition||"hold"===a.actions[0].type?(a.player.setDirection(-1),a.player.play()):"pauseHold"!==a.actions[a.interactionIdx].transition&&"pauseHold"!==a.actions[0].type||a.player.pause()}}),w.set(this,{writable:!0,value:function(){var e=a.actions[a.interactionIdx].state;"hover"!==e&&"click"!==e||(a.container.removeEventListener("click",r(a,p)),a.container.removeEventListener("mouseenter",r(a,p)))}}),b.set(this,{writable:!0,value:function(){var e=a.interactionIdx;r(a,w).call(a);var t=a.actions[a.interactionIdx].jumpTo;t?t>=0&&t<a.actions.length?(a.interactionIdx=t,r(a,k).call(a,{ignorePath:!1})):(a.interactionIdx=0,a.player.goToAndStop(0,!0),r(a,k).call(a,{ignorePath:!1})):(a.interactionIdx++,a.interactionIdx>=a.actions.length?a.actions[a.actions.length-1].reset?(a.interactionIdx=0,a.player.goToAndStop(0,!0),r(a,k).call(a,{ignorePath:!1})):(a.interactionIdx=a.actions.length-1,r(a,k).call(a,{ignorePath:!1})):r(a,k).call(a,{ignorePath:!1})),a.container.dispatchEvent(new CustomEvent("transition",{bubbles:!0,composed:!0,detail:{oldIndex:e,newIndex:a.interactionIdx}}))}}),I.set(this,{writable:!0,value:function(e){var t=a.actions[a.interactionIdx].frames;if(!t)return a.player.resetSegments(!0),void a.player.goToAndPlay(0,!0);"string"==typeof t?a.player.goToAndPlay(t,e):a.player.playSegments(t,e)}}),x.set(this,{writable:!0,value:function(){var e=a.actions[a.interactionIdx].path;if(!e)if("object"===t(a.enteredPlayer)&&"AnimationItem"===a.enteredPlayer.constructor.name){if(e=a.enteredPlayer,a.player===e)return void r(a,k).call(a,{ignorePath:!0})}else{var n=(e=a.loadedAnimation).substr(e.lastIndexOf("/")+1);if(n=n.substr(0,n.lastIndexOf(".json")),a.player.fileName===n)return void r(a,k).call(a,{ignorePath:!0})}var i=a.container.getBoundingClientRect(),o="width: "+i.width+"px !important; height: "+i.height+"px !important; background: "+a.container.style.background;if(a.container.setAttribute("style",o),"object"!==t(a.enteredPlayer)||"AnimationItem"!==a.enteredPlayer.constructor.name){if("string"==typeof a.enteredPlayer){var l=document.querySelector(a.enteredPlayer);l&&"LOTTIE-PLAYER"===l.nodeName&&(a.attachedListeners||(l.addEventListener("ready",(function(){a.container.style.width="",a.container.style.height=""})),l.addEventListener("load",(function(){a.player=l.getLottie(),r(a,k).call(a,{ignorePath:!0})})),a.attachedListeners=!0),l.load(e))}else a.enteredPlayer instanceof HTMLElement&&"LOTTIE-PLAYER"===a.enteredPlayer.nodeName&&(a.attachedListeners||(a.enteredPlayer.addEventListener("ready",(function(){a.container.style.width="",a.container.style.height=""})),a.enteredPlayer.addEventListener("load",(function(){a.player=a.enteredPlayer.getLottie(),r(a,k).call(a,{ignorePath:!0})})),a.attachedListeners=!0),a.enteredPlayer.load(e));if(!a.player)throw new Error("".concat(s," Specified player is invalid."),a.enteredPlayer)}else{if(!window.lottie)throw new Error("".concat(s," A Lottie player is required."));a.stop(),a.player.destroy(),a.container.innerHTML="","object"===t(e)&&"AnimationItem"===e.constructor.name?a.player=window.lottie.loadAnimation({loop:!1,autoplay:!1,animationData:e.animationData,container:a.container}):a.player=window.lottie.loadAnimation({loop:!1,autoplay:!1,path:e,container:a.container}),a.player.addEventListener("DOMLoaded",(function(){a.container.style.width="",a.container.style.height="",r(a,k).call(a,{ignorePath:!0})}))}a.clickCounter=0,a.playCounter=0}}),k.set(this,{writable:!0,value:function(e){var t=e.ignorePath,n=a.actions[a.interactionIdx].state,i=a.actions[a.interactionIdx].transition,o=a.actions[a.interactionIdx].path,s=a.stateHandler.get(n),l=a.transitionHandler.get(i),c=a.actions[a.interactionIdx].speed?a.actions[a.interactionIdx].speed:1,p=a.actions[a.interactionIdx].delay?a.actions[a.interactionIdx].delay:0;t||!(o||a.actions[a.actions.length-1].reset&&0===a.interactionIdx)?setTimeout((function(){s?s.call():"none"===n&&(a.player.loop=!1,a.player.autoplay=!1),l&&l.call(),a.player.autoplay&&(a.player.resetSegments(!0),r(a,I).call(a,!0)),a.player.setSpeed(c)}),p):r(a,x).call(a)}}),P.set(this,{writable:!0,value:function(e,t){if(-1!==e&&-1!==t){var n=a.getContainerCursorPosition(e,t);e=n.x,t=n.y}var i=a.actions.find((function(n){var a=n.position;if(a){if(Array.isArray(a.x)&&Array.isArray(a.y))return e>=a.x[0]&&e<=a.x[1]&&t>=a.y[0]&&t<=a.y[1];if(!Number.isNaN(a.x)&&!Number.isNaN(a.y))return e===a.x&&t===a.y}return!1}));if(i)if("seek"===i.type||"seek"===i.transition){var r=(e-i.position.x[0])/(i.position.x[1]-i.position.x[0]),o=(t-i.position.y[0])/(i.position.y[1]-i.position.y[0]);a.player.playSegments(i.frames,!0),i.position.y[0]<0&&i.position.y[1]>1?a.player.goToAndStop(Math.floor(r*a.player.totalFrames),!0):a.player.goToAndStop(Math.ceil((r+o)/2*a.player.totalFrames),!0)}else"loop"===i.type?a.player.playSegments(i.frames,!0):"play"===i.type?(!0===a.player.isPaused&&a.player.resetSegments(),a.player.playSegments(i.frames)):"stop"===i.type&&(a.player.resetSegments(!0),a.player.goToAndStop(i.frames[0],!0))}}),S.set(this,{writable:!0,value:function(){var e=a.getContainerVisibility(),t=a.actions.find((function(t){var n=t.visibility;return e>=n[0]&&e<=n[1]}));if(t)if("seek"===t.type){var n=t.frames[0],i=2==t.frames.length?t.frames[1]:a.player.totalFrames-1;null!==a.assignedSegment&&(a.player.resetSegments(!0),a.assignedSegment=null),a.player.goToAndStop(n+Math.round((e-t.visibility[0])/(t.visibility[1]-t.visibility[0])*(i-n)),!0)}else"loop"===t.type?(a.player.loop=!0,(null===a.assignedSegment||a.assignedSegment!==t.frames||!0===a.player.isPaused)&&(a.player.playSegments(t.frames,!0),a.assignedSegment=t.frames)):"play"===t.type?a.scrolledAndPlayed||(a.scrolledAndPlayed=!0,a.player.resetSegments(!0),a.player.play()):"stop"===t.type&&a.player.goToAndStop(t.frames[0],!0)}}),this.enteredPlayer=T,"object"!==t(T)||"AnimationItem"!==T.constructor.name){if("string"==typeof T){var O=document.querySelector(T);O&&"LOTTIE-PLAYER"===O.nodeName&&(T=O.getLottie())}else T instanceof HTMLElement&&"LOTTIE-PLAYER"===T.nodeName&&(T=T.getLottie());if(!T){var W=s+"Specified player:"+T+" is invalid.";throw new Error(W)}}"string"==typeof M&&(M=document.querySelector(M)),M||(M=T.wrapper),this.player=T,this.loadedAnimation=this.player.path+this.player.fileName+".json",this.attachedListeners=!1,this.container=M,this.mode=C,this.actions=A,this.options=H,this.assignedSegment=null,this.scrolledAndPlayed=!1,this.interactionIdx=0,this.clickCounter=0,this.playCounter=0,this.stateHandler=new Map,this.transitionHandler=new Map}var l,A,M;return l=e,(A=[{key:"getContainerVisibility",value:function(){var e=this.container.getBoundingClientRect(),t=e.top,n=e.height;return(window.innerHeight-t)/(window.innerHeight+n)}},{key:"getContainerCursorPosition",value:function(e,t){var n=this.container.getBoundingClientRect(),a=n.top;return{x:(e-n.left)/n.width,y:(t-a)/n.height}}},{key:"start",value:function(){var e=this;"scroll"===this.mode?this.player.addEventListener("DOMLoaded",(function(){e.player.stop(),window.addEventListener("scroll",r(e,S))})):"cursor"===this.mode?this.player.addEventListener("DOMLoaded",(function(){e.actions&&1===e.actions.length?"click"===e.actions[0].type?(e.player.loop=!1,e.player.stop(),e.container.addEventListener("click",r(e,y))):"hover"===e.actions[0].type?(e.player.loop=!1,e.player.stop(),e.container.addEventListener("mouseenter",r(e,y))):"toggle"===e.actions[0].type?(e.player.loop=!1,e.player.stop(),e.container.addEventListener("click",r(e,d))):"hold"===e.actions[0].type||"pauseHold"===e.actions[0].type?(e.container.addEventListener("mouseenter",r(e,L)),e.container.addEventListener("mouseleave",r(e,E))):"seek"===e.actions[0].type&&(e.player.loop=!0,e.player.stop(),e.container.addEventListener("mousemove",r(e,u)),e.container.addEventListener("mouseout",r(e,m))):(e.player.loop=!0,e.player.stop(),e.container.addEventListener("mousemove",r(e,u)),e.container.addEventListener("mouseleave",r(e,m)),r(e,P).call(e,-1,-1))})):"chain"===this.mode&&(this.player.isLoaded?(r(e,c).call(e),e.player.loop=!1,e.player.stop(),r(e,k).call(e,{ignorePath:!1})):this.player.addEventListener("DOMLoaded",(function(){r(e,c).call(e),e.player.loop=!1,e.player.stop(),r(e,k).call(e,{ignorePath:!1})})))}},{key:"redefineOptions",value:function(e){var n=e.actions,a=e.container,r=e.mode,o=e.player,l=i(e,["actions","container","mode","player"]);if(this.stop(),this.player.stop(),this.enteredPlayer=o,"object"!==t(o)||"AnimationItem"!==o.constructor.name){if("string"==typeof o){var c=document.querySelector(o);c&&"LOTTIE-PLAYER"===c.nodeName&&(o=c.getLottie())}else o instanceof HTMLElement&&"LOTTIE-PLAYER"===o.nodeName&&(o=o.getLottie());if(!o)throw new Error(s+"Specified player:"+o+" is invalid.",o)}"string"==typeof a&&(a=document.querySelector(a)),a||(a=o.wrapper),this.player=o,this.loadedAnimation=this.player.path+this.player.fileName+".json",this.attachedListeners=!1,this.container=a,this.mode=r,this.actions=n,this.options=l,this.assignedSegment=null,this.scrolledAndPlayed=!1,this.interactionIdx=0,this.clickCounter=0,this.playCounter=0,this.stateHandler=new Map,this.transitionHandler=new Map,this.start()}},{key:"stop",value:function(){"scroll"===this.mode&&window.removeEventListener("scroll",r(this,S)),"cursor"===this.mode&&(this.container.removeEventListener("click",r(this,y)),this.container.removeEventListener("click",r(this,d)),this.container.removeEventListener("mouseenter",r(this,y)),this.container.removeEventListener("mousemove",r(this,u)),this.container.removeEventListener("mouseleave",r(this,m))),"chain"===this.mode&&(this.container.removeEventListener("click",r(this,y)),this.container.removeEventListener("click",r(this,p)),this.container.removeEventListener("mouseenter",r(this,y)),this.container.removeEventListener("mouseenter",r(this,p)),this.container.removeEventListener("mouseenter",r(this,L)),this.container.removeEventListener("mouseleave",r(this,E)),this.container.removeEventListener("mousemove",r(this,u)),this.container.removeEventListener("mouseout",r(this,m)),this.player.removeEventListener("loopComplete",r(this,v)),this.player.removeEventListener("complete",r(this,v)),this.player.removeEventListener("enterFrame",r(this,f)),this.player.removeEventListener("enterFrame",r(this,g)))}}])&&a(l.prototype,A),M&&a(l,M),e}(),c=new WeakMap,p=new WeakMap,d=new WeakMap,y=new WeakMap,u=new WeakMap,m=new WeakMap,v=new WeakMap,h=new WeakMap,f=new WeakMap,g=new WeakMap,L=new WeakMap,E=new WeakMap,w=new WeakMap,b=new WeakMap,I=new WeakMap,x=new WeakMap,k=new WeakMap,P=new WeakMap,S=new WeakMap,A=function(e){var t=new l(e);return t.start(),t};e.LottieInteractivity=l,e.create=A,e.default=A,Object.defineProperty(e,"__esModule",{value:!0})}));
// Lottite interactivity v1.3.0
